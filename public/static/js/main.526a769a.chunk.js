(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,n,a){},107:function(e,n,a){},108:function(e,n,a){},109:function(e,n,a){},110:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a.n(t),s=a(33),c=a.n(s),o=a(26),l=a(39),i=a(11),d=a(83),u=a(118),j=a(119),b=a(117),g=a(14),m=a(3),p={lat:21,lng:22},h=r.a.createContext(),O=function(e){var n=e.children,a=Object(t.useState)(p),r=Object(g.a)(a,2),s=r[0],c=r[1];return Object(m.jsx)(h.Provider,{value:[s,c],children:n})},x=a(82),v=(a(94),a(41));var f={width:"100%",height:"100%"},N={lat:-32.03784,lng:115.80174},y=["places"],k=["AIzaSyAaEGCm_V-1vTYumVqYgk397mI5vJozd5Q"],S=function(){return[{stylers:[{hue:"#2c3e50"},{saturation:250}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:50},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}]};function w(e){var n=Object(v.d)({googleMapsApiKey:k,libraries:y}),a=n.isLoaded,t=n.loadError,s=r.a.useState(null),c=Object(g.a)(s,2),o=c[0],l=c[1],i=r.a.useRef(),d=r.a.useCallback((function(e){i.current=e}),[]);return t?Object(m.jsx)("p",{children:'"error loading google script"'}):a?Object(m.jsx)("div",{className:"map",children:Object(m.jsxs)(v.a,{mapContainerStyle:f,center:N,zoom:13.5,options:{styles:S},onLoad:d,children:[e&&e.hazardData.map((function(e){return Object(m.jsx)(v.c,{position:{lat:e.lat,lng:e.lng},icon:{url:"./icons/dog.png",scaledSize:new window.google.maps.Size(25,25)},onClick:function(){l(e)}},e._id)})),o?Object(m.jsx)(v.b,{position:{lat:o.lat,lng:o.lng},onCloseClick:function(){console.log(o),l(null)},children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h3",{children:o.hazardType}),Object(m.jsx)("p",{className:"infoP",children:o.address}),Object(m.jsxs)("p",{className:"infoP",children:["Round Number: ",o.roundNumber]}),Object(m.jsx)("p",{className:"infoP",children:o.message})]})}):null]})}):Object(m.jsx)("p",{children:'"Loading..."'})}var C,z,I,T,$,A,_=r.a.memo(w),P=a(52),M=a(53),R=a(64),F=new(function(){function e(){Object(P.a)(this,e)}return Object(M.a)(e,[{key:"getProfile",value:function(){return Object(R.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return Object(R.a)(e).exp<Date.now()/1e3}catch(n){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),localStorage.removeItem("state"),window.location.assign("/")}}]),e}()),H=(a(95),a(34)),L=a(120),D=(Object(L.a)(C||(C=Object(H.a)(["\n  {\n    user {\n      _id\n      firstName\n      lastName\n      email\n    }\n  }\n"]))),Object(L.a)(z||(z=Object(H.a)(["\n  {\n    getOneRound {\n    _id\n    roundNumber\n    startAddress\n    lpo\n    hazards{\n      _id\n      hazardType\n      address\n      message\n    }\n  }\n}\n"]))),Object(L.a)(I||(I=Object(H.a)(["\n{\n  getAllHazards {\n    _id\n    hazardType\n    roundNumber\n    round{\n      startAddress\n      lpo\n    }\n    address\n    message\n    lat\n    lng\n    user{\n      _id\n    }\n  }\n}\n\n"])))),E=a(121),J=function(){var e=Object(E.a)(D),n=e.loading,a=e.data,t=e.error;if(n)return Object(m.jsx)("p",{children:"Loading..."});if(t)return Object(m.jsxs)("p",{children:["error fetching hazards ",t]});console.log("data:",a);var r=a.getAllHazards;return console.log("hazard data:",r),Object(m.jsx)("div",{className:"homeContainer",style:{backgroundImage:"url(./icons/blueAus.PNG)",backgroundPosition:"center",backgroundSize:"cover"},children:Object(m.jsxs)("div",{className:"mapContainer",children:[Object(m.jsx)(_,{hazardData:r}),F.loggedIn()?Object(m.jsx)("div",{}):Object(m.jsx)("p",{id:"prompt",children:"Please log in to add hazards"})]})})},B=(a(96),function(){return Object(m.jsx)("div",{className:"roundContainer",style:{backgroundImage:"url(./icons/redCity.PNG)",backgroundPosition:"right center",backgroundSize:"cover"},children:Object(m.jsx)("h1",{children:"Round Report"})})}),G=a(38),U=a(31),V=a.n(U),q=a(44),Y=Object(L.a)(T||(T=Object(H.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        firstName\n        lastName\n        email\n        _id\n      }\n    }\n  }\n"]))),K=Object(L.a)($||($=Object(H.a)(["\n  mutation addUser(\n    $firstName: String!\n    $lastName: String!\n    $email: String!\n    $password: String!\n  ) {\n    addUser(\n      firstName: $firstName\n      lastName: $lastName\n      email: $email\n      password: $password\n    ) {\n      token\n      user {\n        firstName\n        lastName\n        email\n        _id\n      }\n    }\n  }\n"]))),Q=Object(L.a)(A||(A=Object(H.a)(["\n  mutation addHazard(\n    $roundNumber: Int!\n    $hazardType: String!\n    $message: String\n    $address: String!\n    $lat: Float!\n    $lng: Float!\n    $user: ID!\n  ) {\n    addHazard(\n      roundNumber: $roundNumber\n      hazardType: $hazardType\n      message: $message\n      address: $address\n      lat: $lat\n      lng: $lng\n      user: $user\n    ){\n      _id\n      roundNumber\n      hazardType\n      message\n      address\n      lat\n      lng\n      user{\n        _id\n      }\n    }\n  }\n\n\n"]))),W=a(123),X=(a(98),a(59)),Z=a(49);a(99);var ee=function(){var e=Object(X.a)({requestOptions:{location:{lat:function(){return-32.03784},lng:function(){return 115.80174}},radius:5e3}}),n=e.ready,a=e.value,r=e.suggestions,s=r.status,c=r.data,o=e.setValue,l=e.clearSuggestions,i=Object(t.useContext)(h),d=Object(g.a)(i,2),u=(d[0],d[1]);return Object(m.jsxs)(Z.a,{onSelect:function(){var e=Object(q.a)(V.a.mark((function e(n){var a,t,r,s,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(n,!1),l(),e.prev=2,e.next=5,Object(X.b)({address:n});case 5:return a=e.sent,console.log(a),t=a[0].formatted_address,e.next=10,Object(X.c)(a[0]);case 10:r=e.sent,s=r.lat,c=r.lng,console.log(s,c),u({lat:s,lng:c,address:t}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),console.log("autocomplete error",e.t0);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(n){return e.apply(this,arguments)}}(),children:[Object(m.jsx)(Z.b,{className:"searchBox",value:a,onChange:function(e){o(e.target.value)},disabled:!n,placeholder:"Enter an address"}),Object(m.jsx)(Z.d,{children:"OK"===s&&c.map((function(e){var n=e.place_id,a=e.description;return Object(m.jsx)(Z.c,{value:a},n)}))})]})},ne={roundNumber:"",hazardType:"",location:"",message:""},ae=["places"],te=["AIzaSyAaEGCm_V-1vTYumVqYgk397mI5vJozd5Q"];var re=function(e){var n=Object(t.useContext)(h),a=Object(g.a)(n,2),r=a[0],s=(a[1],Object(v.d)({googleMapsApiKey:te,libraries:ae})),c=s.isLoaded,l=s.loadError;console.log("coords data:",r);var i=Object(t.useState)(ne),d=Object(g.a)(i,2),u=d[0],j=d[1],b=Object(W.a)(Q),p=Object(g.a)(b,1)[0],O=function(){var e=Object(q.a)(V.a.mark((function e(n){var a,t,s,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log("hazard form data:",u),a=localStorage.getItem("deets"),t=JSON.parse(a),console.log("createHazard userdeets",t),e.prev=5,e.next=8,p({variables:{roundNumber:parseInt(u.roundNumber),hazardType:u.hazardType,address:r.address,lat:r.lat,lng:r.lng,message:u.message,user:t._id}});case 8:s=e.sent,c=s.data,console.log(c),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(n){return e.apply(this,arguments)}}(),x=function(e){j(Object(o.a)(Object(o.a)({},u),{},Object(G.a)({},e.target.name,e.target.value)))};return l?Object(m.jsx)("p",{children:'"error loading google script"'}):c?Object(m.jsx)("div",{className:"createHazardContainer",style:{backgroundImage:"url(./icons/blueNightCity.PNG)",backgroundPosition:"center",backgroundSize:"cover"},children:Object(m.jsx)("div",{className:"formContainer",children:Object(m.jsxs)("form",{className:"form",onSubmit:O,children:[Object(m.jsx)("p",{className:"label",children:"Enter Address of Hazard"}),Object(m.jsx)(ee,{}),Object(m.jsx)("label",{className:"label",htmlFor:"rndNum",children:"Round Number"}),Object(m.jsx)("input",{name:"roundNumber",onChange:x,className:"input",type:"number",id:"rndNum",min:"1",max:"100",placeholder:"Please enter the Round Number "}),Object(m.jsx)("label",{className:"label",htmlFor:"hazardType",children:"Hazard Type"}),Object(m.jsxs)("select",{className:"select",name:"hazardType",id:"hazardType",onChange:x,children:[Object(m.jsx)("option",{value:"",children:"--Please choose a hazard type--"}),Object(m.jsx)("option",{value:"Aggresive Dog",children:"Aggresive Dog"}),Object(m.jsx)("option",{value:"Aggresive Magpie",children:"Aggresive Magpie"}),Object(m.jsx)("option",{value:"Blind Driveway",children:"Blind Driveway"}),Object(m.jsx)("option",{value:"Slippery Surface",children:"Slippery Surface"}),Object(m.jsx)("option",{value:"School",children:"School"}),Object(m.jsx)("option",{value:"Intersection",children:"Intersection"}),Object(m.jsx)("option",{value:"Roadworks",children:"Roadworks"}),Object(m.jsx)("option",{value:"Missing Letterbox",children:"Missing Letterbox"}),Object(m.jsx)("option",{value:"Aggresive Human",children:"Aggresive Human"}),Object(m.jsx)("option",{value:"Other",children:"Other"})]}),Object(m.jsx)("label",{className:"label",htmlFor:"message",children:"Message"}),Object(m.jsx)("textarea",{name:"message",onChange:x,className:"textArea",type:"text",id:"message",cols:"20",rows:"5",placeholder:"Add Notes"}),Object(m.jsx)("button",{className:"button",type:"submit",children:"Submit"})]})})}):Object(m.jsx)("p",{children:'"Loading..."'})},se=a(68),ce=a(71),oe=(a(63),function(e){return Object(m.jsxs)("nav",{className:"navLinks",children:[Object(m.jsx)(l.b,{exact:!0,to:"/",className:"links",activeClassName:"selected",onClick:function(){return e.isMobile&&e.closeNav()},children:"Home"}),F.loggedIn()?Object(m.jsx)(l.b,{exact:!0,to:"/create-hazard",activeClassName:"selected",className:"links",onClick:function(){return e.isMobile&&e.closeNav()},children:"Add Hazard"}):null,Object(m.jsx)(l.b,{exact:!0,to:"/round-report",activeClassName:"selected",className:"links",onClick:function(){return e.isMobile&&e.closeNav()},children:"Round Report"}),F.loggedIn()?Object(m.jsx)("button",{className:"links",id:"signBtn",onClick:function(){F.logout()},children:"Sign Out"}):Object(m.jsx)(l.b,{exact:!0,to:"/signIn",activeClassName:"selected",className:"links",onClick:function(){return e.isMobile&&e.closeNav()},children:"Sign In"})]})}),le=function(){var e=Object(t.useState)(!1),n=Object(g.a)(e,2),a=n[0],r=n[1],s=Object(m.jsx)(se.a,{className:"icon",icon:ce.a,onClick:function(){return r(!a)}}),c=Object(m.jsx)(se.a,{className:"icon",icon:ce.b,onClick:function(){return r(!1)}});return Object(m.jsxs)("div",{className:"mobNav",children:[a?c:s,a&&Object(m.jsx)(oe,{isMobile:!0,closeNav:function(){return r(!1)}})]})},ie=function(){return Object(m.jsx)("nav",{className:"deskNav",children:Object(m.jsx)(oe,{isMobile:!1})})},de=(a(106),function(){return Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("p",{className:"logo",children:"RR"}),Object(m.jsxs)("div",{className:"navContainer",children:[Object(m.jsx)(ie,{}),Object(m.jsx)(le,{})]})]})}),ue=(a(107),function(){return Object(m.jsx)("div",{className:"footer",children:Object(m.jsx)("p",{className:"label",children:"Created by BT"})})}),je=(a(77),function(e){var n=e.type,a=e.label,t=e.placeholder,r=e.handleChange,s=e.autoFocus;return Object(m.jsxs)("div",{className:"loginWrapper",children:[Object(m.jsx)("label",{htmlFor:a,className:"loginLabel",children:t}),Object(m.jsx)("input",{className:"loginInput",placeholder:t,name:a,type:n,id:a,onChange:r,autoFocus:s,autoComplete:n})]})}),be={firstName:"",lastName:"",email:"",password:"",confirmPassword:""},ge={email:"",password:""};var me=function(e){var n=Object(t.useState)(be),a=Object(g.a)(n,2),r=a[0],s=a[1],c=Object(t.useState)(ge),l=Object(g.a)(c,2),i=l[0],d=l[1],u=Object(W.a)(Y),j=Object(g.a)(u,2),b=j[0],p=j[1].error,h=Object(W.a)(K),O=Object(g.a)(h,1)[0],x=Object(t.useState)(!1),v=Object(g.a)(x,2),f=v[0],N=v[1],y=function(){var e=Object(q.a)(V.a.mark((function e(n){var a,t,s,c,o,l,d;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log(r,i),!f){e.next=18;break}return e.prev=3,e.next=6,O({variables:{email:r.email,password:r.password,firstName:r.firstName,lastName:r.lastName}});case 6:a=e.sent,t=a.data.addUser.user,localStorage.setItem("deets",JSON.stringify(t)),s=a.data.addUser.token,F.login(s),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("error signing up:",e.t0);case 16:e.next=34;break;case 18:return e.prev=18,e.next=21,b({variables:{email:i.email,password:i.password}});case 21:c=e.sent,console.log("MutationResponse:",c.data.login.user._id),o=c.data.login.token,F.login(o),l=c.data.login.user,localStorage.setItem("deets",JSON.stringify(l)),d=localStorage.getItem("deets"),console.log("local storage deets:",JSON.parse(d)),e.next=34;break;case 31:e.prev=31,e.t1=e.catch(18),console.log("Login Failed:",e.t1);case 34:case"end":return e.stop()}}),e,null,[[3,13],[18,31]])})));return function(n){return e.apply(this,arguments)}}(),k=function(e){s(Object(o.a)(Object(o.a)({},r),{},Object(G.a)({},e.target.name,e.target.value)))},S=function(e){d(Object(o.a)(Object(o.a)({},i),{},Object(G.a)({},e.target.name,e.target.value)))};return Object(m.jsxs)("div",{className:"loginContainer",style:{backgroundImage:"url(./icons/purpleCity.PNG)",backgroundPosition:"right center",backgroundSize:"cover"},children:[Object(m.jsx)("h1",{className:"loginTitle",children:f?"Sign Up":"Sign In"}),Object(m.jsxs)("form",{onSubmit:y,className:"loginForm",children:[f&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(je,{placeholder:"First Name",handleChange:f?k:S,autoFocus:!0,label:"firstName",type:"firstName"}),Object(m.jsx)(je,{placeholder:"Last Name",handleChange:f?k:S,label:"lastName",type:"lastName"})]}),Object(m.jsx)(je,{placeholder:"Email Address",handleChange:f?k:S,label:"email",type:"email"}),Object(m.jsx)(je,{placeholder:"Password",handleChange:f?k:S,label:"password",type:"password",autocomplete:"password"}),p?Object(m.jsx)("div",{children:Object(m.jsx)("p",{className:"error-text",children:"The provided credentials are incorrect"})}):null,f&&Object(m.jsx)(je,{placeholder:"Repeat Password",handleChange:f?k:S,label:"password",type:"password",autocomplete:"new-password"}),Object(m.jsx)("button",{type:"submit",className:"button",children:f?"Sign Up":"Sign In"}),Object(m.jsx)("button",{onClick:function(){N((function(e){return!e}))},type:"button",className:"button",children:f?"Already have an account? Sign In":"Create Account"})]})]})},pe=(a(108),function(){return Object(m.jsx)(t.Fragment,{children:Object(m.jsx)(me,{})})}),he=Object(d.a)({uri:"/graphql"}),Oe=Object(x.a)((function(e,n){var a=n.headers,t=localStorage.getItem("id_token");return{headers:Object(o.a)(Object(o.a)({},a),{},{authorization:t?"Bearer ".concat(t):""})}})),xe=new u.a({link:Oe.concat(he),cache:new j.a});var ve=function(){return Object(m.jsx)(b.a,{client:xe,children:Object(m.jsx)(l.a,{children:Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(O,{children:[Object(m.jsx)(de,{}),Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)(i.c,{children:[Object(m.jsx)(i.a,{exact:!0,path:"/",component:J}),Object(m.jsx)(i.a,{exact:!0,path:"/round-report",component:B}),Object(m.jsx)(i.a,{exact:!0,path:"/create-hazard",component:re}),Object(m.jsx)(i.a,{exact:!0,path:"/signIn",component:pe})]})}),Object(m.jsx)(ue,{})]})})})})};a(109);c.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(ve,{})}),document.getElementById("root"))},63:function(e,n,a){},77:function(e,n,a){},94:function(e,n,a){},95:function(e,n,a){},96:function(e,n,a){},98:function(e,n,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.526a769a.chunk.js.map